{"version":3,"names":[],"mappings":"","sources":["js/config-providers.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n$(document).ready(function () {\n    // eslint-disable-line max-lines\n    console.log('This function need to be moved to config/providers.js but can\\'t be as we\\'ve got scope issues currently.');\n    $.fn.showHideProviders = function () {\n        $('.providerDiv').each(function () {\n            const providerName = $(this).prop('id');\n            const selectedProvider = $('#editAProvider :selected').val();\n\n            if (selectedProvider + 'Div' === providerName) {\n                $(this).show();\n            } else {\n                $(this).hide();\n            }\n        });\n    };\n\n    $.fn.providerExists = function (loopThroughArray, searchFor) {\n        loopThroughArray.some(rootObject => {\n            console.log('Found ' + rootObject.name + ' while searching for: ' + searchFor);\n            return rootObject.name === searchFor;\n        });\n        return false;\n    };\n\n    /**\n     * Gets categories for the provided newznab provider.\n     * @param {Array} selectedProvider\n     * @return no return data. Function updateNewznabCaps() is run at callback\n     */\n    $.fn.getCategories = function (selectedProvider) {\n        const name = selectedProvider[0];\n        const url = selectedProvider[1];\n        const apiKey = selectedProvider[2];\n\n        if (!name || !url || !apiKey) {\n            return;\n        }\n\n        $('.updating_categories').wrapInner('<span><img src=\"images/loading16' + MEDUSA.config.themeSpinner + '.gif\"> Updating Categories...</span>');\n\n        const params = { url, name, api_key: apiKey }; // eslint-disable-line camelcase\n        return $.getJSON('config/providers/getNewznabCategories', params);\n    };\n\n    /**\n     * Updates the Global array $.fn.newznabProvidersCapabilities with a combination of newznab prov name\n     * and category capabilities. Return\n     * @param {Array} newzNabCaps, is the returned object with newznabprovider Name and Capabilities.\n     * @param {Array} selectedProvider\n     * @return no return data. The multiselect input $(\"#newznab_cap\") is updated, as a result.\n     */\n    $.fn.updateCaps = function (newzNabCaps, selectedProvider) {\n        if (newzNabCaps && !$(this).providerExists($.fn.newznabProvidersCapabilities, selectedProvider)) {\n            $.fn.newznabProvidersCapabilities.push({\n                name: selectedProvider,\n                categories: newzNabCaps.tv_categories // eslint-disable-line camelcase\n            });\n        }\n\n        // Loop through the array and if currently selected newznab provider name matches one in the array, use it to\n        // update the capabilities select box (on the left).\n        const newCapOptions = [];\n        if (selectedProvider) {\n            $.fn.newznabProvidersCapabilities.forEach(newzNabCap => {\n                if (newzNabCap.name && newzNabCap.name === selectedProvider && Array.isArray(newzNabCap.categories)) {\n                    newzNabCap.categories.forEach(categorySet => {\n                        if (categorySet.id && categorySet.name) {\n                            newCapOptions.push({\n                                value: categorySet.id,\n                                text: categorySet.name + ' (' + categorySet.id + ')'\n                            });\n                        }\n                    });\n                }\n            });\n        }\n        return newCapOptions;\n    };\n\n    function verifyUrl(url, trailingSlash) {\n        trailingSlash = trailingSlash !== undefined ? trailingSlash : true; // eslint-disable-line no-negated-condition\n\n        url = $.trim(url);\n        if (!url) {\n            alert('Invalid URL specified!'); // eslint-disable-line no-alert\n            return;\n        }\n\n        if (!/^https?:\\/\\//i.test(url)) {\n            url = 'http://' + url;\n        }\n\n        if (trailingSlash && url.match('/$') === null) {\n            url += '/';\n        }\n\n        return url;\n    }\n\n    const newznabProviders = [];\n    const torrentRssProviders = [];\n    const torznabProviders = [];\n\n    $.fn.addNewznabProvider = function (id, name, url, apiKey, cats, isDefault) {\n        // eslint-disable-line max-params\n        const verifiedUrl = verifyUrl(url);\n        const newData = [isDefault, [name, verifiedUrl, apiKey, cats]];\n        newznabProviders[id] = newData;\n\n        $('#editANewznabProvider').append('<option value=' + id + '>' + name + '</option>');\n\n        if ($('#provider_order_list > #' + id).length === 0) {\n            $('#provider_order_list').append('<li class=\"ui-state-default\" id=\"' + id + '\"> <input type=\"checkbox\" id=\"enable_' + id + '\" class=\"provider_enabler\" CHECKED> <a href=\"' + MEDUSA.config.anonURL + url + '\" class=\"imgLink\" target=\"_new\"><img src=\"images/providers/newznab.png\" alt=\"' + name + '\" width=\"16\" height=\"16\"></a> ' + name + '</li>'); // eslint-disable-line no-undef\n            $('#provider_order_list').sortable('refresh');\n        }\n\n        $(this).makeNewznabProviderString();\n    };\n\n    $.fn.addTorrentRssProvider = function (id, name, url, cookies, titleTag) {\n        // eslint-disable-line max-params\n        const verifiedUrl = verifyUrl(url, false);\n        const newData = [name, verifiedUrl, cookies, titleTag];\n        torrentRssProviders[id] = newData;\n\n        $('#editATorrentRssProvider').append('<option value=' + id + '>' + name + '</option>');\n\n        if ($('#provider_order_list > #' + id).length === 0) {\n            $('#provider_order_list').append('<li class=\"ui-state-default\" id=\"' + id + '\"> <input type=\"checkbox\" id=\"enable_' + id + '\" class=\"provider_enabler\" CHECKED> <a href=\"' + MEDUSA.config.anonURL + url + '\" class=\"imgLink\" target=\"_new\"><img src=\"images/providers/torrentrss.png\" alt=\"' + name + '\" width=\"16\" height=\"16\"></a> ' + name + '</li>'); // eslint-disable-line no-undef\n            $('#provider_order_list').sortable('refresh');\n        }\n\n        $(this).makeTorrentRssProviderString();\n    };\n\n    $.fn.addTorznabProvider = function (id, name, url, apiKey, cats, caps) {\n        // eslint-disable-line max-params\n        const verifiedUrl = verifyUrl(url);\n        const newData = [name, verifiedUrl, apiKey, cats, caps];\n        torznabProviders[id] = newData;\n\n        $('#editATorznabProvider').append('<option value=' + id + '>' + name + '</option>');\n\n        if ($('#provider_order_list > #' + id).length === 0) {\n            $('#provider_order_list').append('<li class=\"ui-state-default\" id=\"' + id + '\"> <input type=\"checkbox\" id=\"enable_' + id + '\" class=\"provider_enabler\" CHECKED> <a href=\"' + MEDUSA.config.anonURL + url + '\" class=\"imgLink\" target=\"_new\"><img src=\"images/providers/jackett.png\" alt=\"' + name + '\" width=\"16\" height=\"16\"></a> ' + name + '</li>'); // eslint-disable-line no-undef\n            $('#provider_order_list').sortable('refresh');\n        }\n\n        $(this).makeTorznabProviderString();\n    };\n\n    $.fn.updateNewznabProvider = function (id, url, apiKey, cats) {\n        newznabProviders[id][1][1] = url;\n        newznabProviders[id][1][2] = apiKey;\n        newznabProviders[id][1][3] = cats;\n\n        // Get Categories Capabilities\n        if (id && url && apiKey) {\n            const jqxhr = $(this).getCategories(newznabProviders[id][1]);\n            jqxhr.done(function (data) {\n                $('.updating_categories').empty();\n                if (data.success === true) {\n                    const capabilities = $(this).updateCaps(data, id);\n                    $('#newznab_cap').replaceOptions(capabilities);\n                    $('.updating_categories').wrapInner('<span>Categories updated!</span>');\n                } else {\n                    $('.updating_categories').wrapInner('<span>Updating categories failed!</span>');\n                }\n            }).always(function () {\n                $(this).makeNewznabProviderString();\n            });\n        }\n    };\n\n    $.fn.updateTorrentRssProvider = function (id, url, cookies, titleTag) {\n        torrentRssProviders[id][1] = url;\n        torrentRssProviders[id][2] = cookies;\n        torrentRssProviders[id][3] = titleTag;\n        $(this).populateTorrentRssSection();\n        $(this).makeTorrentRssProviderString();\n    };\n\n    $.fn.updateTorznabProvider = function (id, url, apiKey, cats, caps) {\n        // eslint-disable-line max-params\n        torznabProviders[id][1] = url;\n        torznabProviders[id][2] = apiKey;\n        torznabProviders[id][3] = cats;\n        torznabProviders[id][4] = caps;\n\n        // Get Categories Capabilities\n        if (id && url && apiKey) {\n            const jqxhr = $(this).getCategories(torznabProviders[id]);\n            jqxhr.done(function (data) {\n                $('.updating_categories').empty();\n                if (data.success === true) {\n                    torznabProviders[id][4] = data.caps.toString();\n                    $('#torznab_caps').val(data.caps);\n                    const capabilities = $(this).updateCaps(data, id);\n                    $('#torznab_cap').replaceOptions(capabilities);\n                    $('.updating_categories').wrapInner('<span>Categories updated!</span>');\n                } else {\n                    $('.updating_categories').wrapInner('<span>Updating categories failed!</span>');\n                }\n            }).always(function () {\n                $(this).makeTorznabProviderString();\n            });\n        }\n    };\n\n    $.fn.deleteNewznabProvider = function (id) {\n        $('#editANewznabProvider option[value=' + id + ']').remove();\n        delete newznabProviders[id];\n        $(this).populateNewznabSection();\n        $('li').remove('#' + id);\n        $(this).makeNewznabProviderString();\n    };\n\n    $.fn.deleteTorrentRssProvider = function (id) {\n        $('#editATorrentRssProvider option[value=' + id + ']').remove();\n        delete torrentRssProviders[id];\n        $(this).populateTorrentRssSection();\n        $('li').remove('#' + id);\n        $(this).makeTorrentRssProviderString();\n    };\n\n    $.fn.deleteTorznabProvider = function (id) {\n        $('#editATorznabProvider option[value=' + id + ']').remove();\n        delete torznabProviders[id];\n        $(this).populateTorznabSection();\n        $('li').remove('#' + id);\n        $(this).makeTorznabProviderString();\n    };\n\n    $.fn.populateNewznabSection = function () {\n        const selectedProvider = $('#editANewznabProvider :selected').val();\n        let data = '';\n        let isDefault = '';\n        let chosenCats = '';\n\n        if (selectedProvider === 'addNewznab') {\n            data = ['', '', ''];\n            isDefault = 0;\n            $('#newznab_add_div').show();\n            $('#newznab_update_div').hide();\n            $('#newznabcapdiv').hide();\n            $('#newznab_cat option').each(function () {\n                $(this).remove();\n            });\n        } else {\n            data = newznabProviders[selectedProvider][1];\n            isDefault = newznabProviders[selectedProvider][0];\n            $('#newznab_add_div').hide();\n            $('#newznab_update_div').show();\n            $('#newznabcapdiv').show();\n        }\n\n        $('#newznab_name').val(data[0]);\n        $('#newznab_url').val(data[1]);\n        $('#newznab_api_key').val(data[2]);\n\n        // Check if not already array\n        if (typeof data[3] === 'string') {\n            chosenCats = data[3].split(',');\n        } else {\n            chosenCats = data[3];\n        }\n\n        // Update the category select box (on the right)\n        const newCatOptions = [];\n        if (chosenCats) {\n            chosenCats.forEach(cat => {\n                if (cat !== '') {\n                    newCatOptions.push({\n                        text: cat,\n                        value: cat\n                    });\n                }\n            });\n            $('#newznab_cat').replaceOptions(newCatOptions);\n        }\n\n        if (selectedProvider === 'addNewznab') {\n            $('#newznab_name').prop('disabled', false);\n            $('#newznab_url').prop('disabled', false);\n        } else {\n            $('#newznab_name').prop('disabled', true);\n\n            if (isDefault) {\n                $('#newznab_url').prop('disabled', true);\n                $('#newznab_delete').prop('disabled', true);\n            } else {\n                $('#newznab_url').prop('disabled', false);\n                $('#newznab_delete').prop('disabled', false);\n            }\n        }\n    };\n\n    $.fn.populateTorrentRssSection = function () {\n        const selectedProvider = $('#editATorrentRssProvider :selected').val();\n        let data = '';\n\n        if (selectedProvider === 'addTorrentRss') {\n            data = ['', '', '', 'title'];\n            $('#torrentrss_add_div').show();\n            $('#torrentrss_update_div').hide();\n        } else {\n            data = torrentRssProviders[selectedProvider];\n            $('#torrentrss_add_div').hide();\n            $('#torrentrss_update_div').show();\n        }\n\n        $('#torrentrss_name').val(data[0]);\n        $('#torrentrss_url').val(data[1]);\n        $('#torrentrss_cookies').val(data[2]);\n        $('#torrentrss_title_tag').val(data[3]);\n\n        if (selectedProvider === 'addTorrentRss') {\n            $('#torrentrss_name').prop('disabled', false);\n            $('#torrentrss_url').prop('disabled', false);\n            $('#torrentrss_cookies').prop('disabled', false);\n            $('#torrentrss_title_tag').prop('disabled', false);\n        } else {\n            $('#torrentrss_name').prop('disabled', true);\n            $('#torrentrss_url').prop('disabled', false);\n            $('#torrentrss_cookies').prop('disabled', true);\n            $('#torrentrss_title_tag').prop('disabled', false);\n            $('#torrentrss_delete').prop('disabled', false);\n        }\n    };\n\n    $.fn.populateTorznabSection = function () {\n        const selectedProvider = $('#editATorznabProvider :selected').val();\n        let data = '';\n        let chosenCats = '';\n\n        if (selectedProvider === 'addTorznab') {\n            data = ['', '', '', ''];\n            $('#torznab_add_div').show();\n            $('#torznab_update_div').hide();\n            $('#torznabcapdiv').hide();\n            $('#torznabcapsdiv').hide();\n            $('#torznab_cat option').each(function () {\n                $(this).remove();\n            });\n        } else {\n            data = torznabProviders[selectedProvider];\n            $('#torznab_add_div').hide();\n            $('#torznab_update_div').show();\n            $('#torznabcapdiv').show();\n            $('#torznabcapsdiv').show();\n        }\n\n        $('#torznab_name').val(data[0]);\n        $('#torznab_url').val(data[1]);\n        $('#torznab_api_key').val(data[2]);\n        $('#torznab_caps').val(data[4]);\n\n        // Check if not already array\n        if (typeof data[3] === 'string') {\n            chosenCats = data[3].split(',');\n        } else {\n            chosenCats = data[3];\n        }\n\n        // Update the category select box (on the right)\n        const newCatOptions = [];\n        if (chosenCats) {\n            chosenCats.forEach(cat => {\n                if (cat !== '') {\n                    newCatOptions.push({\n                        text: cat,\n                        value: cat\n                    });\n                }\n            });\n            $('#torznab_cat').replaceOptions(newCatOptions);\n        }\n\n        if (selectedProvider === 'addTorznab') {\n            $('#torznab_name').prop('disabled', false);\n            $('#torznab_url').prop('disabled', false);\n        } else {\n            $('#torznab_name').prop('disabled', true);\n            $('#torznab_url').prop('disabled', false);\n            $('#torznab_delete').prop('disabled', false);\n        }\n    };\n\n    $.fn.makeNewznabProviderString = function () {\n        const provStrings = [];\n\n        for (const id in newznabProviders) {\n            if ({}.hasOwnProperty.call(newznabProviders, id)) {\n                provStrings.push(newznabProviders[id][1].join('|'));\n            }\n        }\n\n        $('#newznab_string').val(provStrings.join('!!!'));\n    };\n\n    $.fn.makeTorrentRssProviderString = function () {\n        const provStrings = [];\n        for (const id in torrentRssProviders) {\n            if ({}.hasOwnProperty.call(torrentRssProviders, id)) {\n                provStrings.push(torrentRssProviders[id].join('|'));\n            }\n        }\n\n        $('#torrentrss_string').val(provStrings.join('!!!'));\n    };\n\n    $.fn.makeTorznabProviderString = function () {\n        const provStrings = [];\n\n        for (const id in torznabProviders) {\n            if ({}.hasOwnProperty.call(torznabProviders, id)) {\n                provStrings.push(torznabProviders[id].join('|'));\n            }\n        }\n\n        $('#torznab_string').val(provStrings.join('!!!'));\n    };\n\n    $.fn.refreshProviderList = function () {\n        const idArr = $('#provider_order_list').sortable('toArray');\n        const finalArr = [];\n        $.each(idArr, (key, val) => {\n            const checked = $('#enable_' + val).is(':checked') ? '1' : '0';\n            finalArr.push(val + ':' + checked);\n        });\n\n        $('#provider_order').val(finalArr.join(' '));\n        $(this).refreshEditAProvider();\n    };\n\n    $.fn.refreshEditAProvider = function () {\n        $('#provider-list').empty();\n\n        const idArr = $('#provider_order_list').sortable('toArray');\n        const finalArr = [];\n        $.each(idArr, (key, val) => {\n            if ($('#enable_' + val).prop('checked')) {\n                finalArr.push(val);\n            }\n        });\n\n        if (finalArr.length > 0) {\n            $('<select>').prop('id', 'editAProvider').addClass('form-control input-sm').appendTo('#provider-list');\n            for (let i = 0, len = finalArr.length; i < len; i++) {\n                const provider = finalArr[i];\n                $('#editAProvider').append($('<option>').prop('value', provider).text($.trim($('#' + provider).text()).replace(/\\s\\*$/, '').replace(/\\s\\*\\*$/, '')));\n            }\n        } else {\n            document.getElementsByClassName('component-desc')[0].innerHTML = 'No providers available to configure.';\n        }\n\n        $(this).showHideProviders();\n    };\n\n    $(this).on('change', '.newznab_api_key', function () {\n        let providerId = $(this).prop('id');\n        providerId = providerId.substring(0, providerId.length - '_hash'.length);\n\n        const url = $('#' + providerId + '_url').val();\n        const cat = $('#' + providerId + '_cat').val();\n        const key = $(this).val();\n\n        $(this).updateNewznabProvider(providerId, url, key, cat);\n    });\n\n    $('#newznab_api_key, #newznab_url').on('change', function () {\n        const selectedProvider = $('#editANewznabProvider :selected').val();\n        if (selectedProvider === 'addNewznab') {\n            return;\n        }\n\n        const url = $('#newznab_url').val();\n        const apiKey = $('#newznab_api_key').val();\n\n        newznabProviders[selectedProvider][1] = url;\n        newznabProviders[selectedProvider][2] = apiKey;\n\n        $(this).makeNewznabProviderString();\n    });\n\n    $('#torrentrss_url, #torrentrss_cookies, #torrentrss_title_tag').on('change', function () {\n        const selectedProvider = $('#editATorrentRssProvider :selected').val();\n        if (selectedProvider === 'addTorrentRss') {\n            return;\n        }\n\n        const url = $('#torrentrss_url').val();\n        const cookies = $('#torrentrss_cookies').val();\n        const titleTag = $('#torrentrss_title_tag').val();\n\n        $(this).updateTorrentRssProvider(selectedProvider, url, cookies, titleTag);\n    });\n\n    $('#torznab_api_key, #torznab_url').on('change', function () {\n        const selectedProvider = $('#editATorznabProvider :selected').val();\n        if (selectedProvider === 'addTorznab') {\n            return;\n        }\n\n        const url = $('#torznab_url').val();\n        const apiKey = $('#torznab_api_key').val();\n\n        torznabProviders[selectedProvider][1] = url;\n        torznabProviders[selectedProvider][2] = apiKey;\n\n        $(this).makeTorznabProviderString();\n    });\n\n    $('body').on('change', '#editAProvider', function () {\n        $(this).showHideProviders();\n    });\n\n    $('#editANewznabProvider').on('change', function () {\n        $('#newznab_cap option').each(function () {\n            $(this).remove();\n        });\n        $('.updating_categories').empty();\n        $(this).populateNewznabSection();\n    });\n\n    $('#editATorrentRssProvider').on('change', function () {\n        $(this).populateTorrentRssSection();\n    });\n\n    $('#editATorznabProvider').on('change', function () {\n        $('#torznab_cap option').each(function () {\n            $(this).remove();\n        });\n        $('.updating_categories').empty();\n        $(this).populateTorznabSection();\n    });\n\n    $(this).on('click', '.provider_enabler', function () {\n        $(this).refreshProviderList();\n    });\n\n    $('#newznab_cat_update').on('click', function () {\n        const selectedProvider = $('#editANewznabProvider :selected').val();\n\n        const url = $('#newznab_url').val();\n        const apiKey = $('#newznab_api_key').val();\n        const cats = $('#newznab_cat option').map((i, opt) => {\n            return $(opt).text();\n        }).toArray().join(',');\n\n        $('#newznab_cat option:not([value])').remove();\n\n        $(this).updateNewznabProvider(selectedProvider, url, apiKey, cats);\n    });\n\n    $('#torznab_cat_update').on('click', function () {\n        const selectedProvider = $('#editATorznabProvider :selected').val();\n\n        const url = $('#torznab_url').val();\n        const apiKey = $('#torznab_api_key').val();\n        const cats = $('#torznab_cat option').map((i, opt) => {\n            return $(opt).text();\n        }).toArray().join(',');\n        const caps = $('#torznab_caps').val();\n\n        $('#torznab_cat option:not([value])').remove();\n\n        $(this).updateTorznabProvider(selectedProvider, url, apiKey, cats, caps);\n    });\n\n    $('#newznab_cat_select').on('click', function () {\n        const selectedProvider = $('#editANewznabProvider :selected').val();\n        const newOptions = [];\n        // When the update botton is clicked, loop through the capabilities list\n        // and copy the selected category id's to the category list on the right.\n        $('#newznab_cap option:selected').each(function () {\n            const selectedCat = $(this).val();\n            newOptions.push({\n                text: selectedCat,\n                value: selectedCat\n            });\n        });\n        if (newOptions.length > 0) {\n            $('#newznab_cat').replaceOptions(newOptions);\n        }\n\n        const cats = $('#newznab_cat option').map((i, opt) => {\n            return $(opt).text();\n        }).toArray().join(',');\n\n        $('#newznab_cat option:not([value])').remove();\n        newznabProviders[selectedProvider][1][3] = cats;\n\n        $(this).makeNewznabProviderString();\n    });\n\n    $('#torznab_cat_select').on('click', function () {\n        const selectedProvider = $('#editATorznabProvider :selected').val();\n        const newOptions = [];\n        // When the update botton is clicked, loop through the capabilities list\n        // and copy the selected category id's to the category list on the right.\n        $('#torznab_cap option:selected').each(function () {\n            const selectedCat = $(this).val();\n            newOptions.push({\n                text: selectedCat,\n                value: selectedCat\n            });\n        });\n        if (newOptions.length > 0) {\n            $('#torznab_cat').replaceOptions(newOptions);\n        }\n\n        const cats = $('#torznab_cat option').map((i, opt) => {\n            return $(opt).text();\n        }).toArray().join(',');\n\n        $('#torznab_cat option:not([value])').remove();\n        torznabProviders[selectedProvider][3] = cats;\n\n        $(this).makeTorznabProviderString();\n    });\n\n    $('#newznab_add').on('click', () => {\n        const name = $.trim($('#newznab_name').val());\n        const url = $.trim($('#newznab_url').val());\n        const apiKey = $.trim($('#newznab_api_key').val());\n\n        const cats = $.trim($('#newznab_cat option').map((i, opt) => {\n            return $(opt).text();\n        }).toArray().join(','));\n\n        if (!name || !url || !apiKey) {\n            return;\n        }\n\n        const params = { kind: 'newznab', name, url };\n\n        // Send to the form with ajax, get a return value\n        $.getJSON('config/providers/canAddProvider', params, function (data) {\n            if (data.error !== undefined) {\n                alert(data.error); // eslint-disable-line no-alert\n                return;\n            }\n\n            $('#newznabcapdiv').show();\n            $(this).addNewznabProvider(data.success, name, url, apiKey, cats, 0);\n            $(this).updateNewznabProvider(data.success, url, apiKey, cats);\n            $('#editANewznabProvider').val(data.success);\n        });\n    });\n\n    $('#torrentrss_add').on('click', () => {\n        const name = $('#torrentrss_name').val();\n        const url = $('#torrentrss_url').val();\n        const cookies = $('#torrentrss_cookies').val();\n        const titleTag = $('#torrentrss_title_tag').val();\n        const params = {\n            name,\n            url,\n            cookies,\n            title_tag: titleTag // eslint-disable-line camelcase\n        };\n\n        // @TODO: Move to the API\n        // send to the form with ajax, get a return value\n        $.getJSON('config/providers/canAddTorrentRssProvider', params, function (data) {\n            if (data.error !== undefined) {\n                alert(data.error); // eslint-disable-line no-alert\n                return;\n            }\n\n            $(this).addTorrentRssProvider(data.success, name, url, cookies, titleTag);\n            $('#editATorrentRssProvider').val(data.success);\n        });\n    });\n\n    $('#torznab_add').on('click', () => {\n        const name = $.trim($('#torznab_name').val());\n        const url = $.trim($('#torznab_url').val());\n        const apiKey = $.trim($('#torznab_api_key').val());\n        const caps = $.trim($('#torznab_caps').val());\n        const cats = $.trim($('#torznab_cat option').map((i, opt) => {\n            return $(opt).text();\n        }).toArray().join(','));\n\n        if (!name || !url || !apiKey) {\n            return;\n        }\n\n        const params = { kind: 'torznab', name, url, api_key: apiKey }; // eslint-disable-line camelcase\n\n        // Send to the form with ajax, get a return value\n        $.getJSON('config/providers/canAddProvider', params, function (data) {\n            if (data.error !== undefined) {\n                $('#torznabcapdiv').hide();\n                $('#torznabcapsdiv').hide();\n                alert(data.error); // eslint-disable-line no-alert\n                return;\n            }\n\n            $('#torznabcapdiv').show();\n            $('#torznabcapsdiv').show();\n            $(this).addTorznabProvider(data.success, name, url, apiKey, cats, caps);\n            $(this).updateTorznabProvider(data.success, url, apiKey, cats, caps);\n            $('#editATorznabProvider').val(data.success);\n        });\n    });\n\n    $('.newznab_delete').on('click', function () {\n        const selectedProvider = $('#editANewznabProvider :selected').val();\n        $(this).deleteNewznabProvider(selectedProvider);\n    });\n\n    $('.torrentrss_delete').on('click', function () {\n        const selectedProvider = $('#editATorrentRssProvider :selected').val();\n        $(this).deleteTorrentRssProvider(selectedProvider);\n    });\n\n    $('.torznab_delete').on('click', function () {\n        const selectedProvider = $('#editATorznabProvider :selected').val();\n        $(this).deleteTorznabProvider(selectedProvider);\n    });\n\n    $(this).on('change', '[class=\"providerDiv_tip\"] input', function () {\n        $('div .providerDiv [name=' + $(this).prop('name') + ']').replaceWith($(this).clone());\n        $('div .providerDiv [newznab_name=' + $(this).prop('id') + ']').replaceWith($(this).clone());\n    });\n\n    $(this).on('change', '[class=\"providerDiv_tip\"] select', function () {\n        $(this).find('option').each(function () {\n            if ($(this).is(':selected')) {\n                $(this).prop('defaultSelected', true);\n            } else {\n                $(this).prop('defaultSelected', false);\n            }\n        });\n        $('div .providerDiv [name=' + $(this).prop('name') + ']').empty().replaceWith($(this).clone());\n    });\n\n    $(this).on('change', '.enabler', function () {\n        if ($(this).is(':checked')) {\n            $('.content_' + $(this).prop('id')).each(function () {\n                $(this).show();\n            });\n        } else {\n            $('.content_' + $(this).prop('id')).each(function () {\n                $(this).hide();\n            });\n        }\n    });\n\n    $('.enabler').each(function () {\n        if ($(this).is(':checked')) {\n            $('.content_' + $(this).prop('id')).show();\n        } else {\n            $('.content_' + $(this).prop('id')).hide();\n        }\n    });\n\n    $.fn.makeTorrentOptionString = function (providerId) {\n        const seedRatio = $('.providerDiv_tip #' + providerId + '_seed_ratio').prop('value');\n        const seedTime = $('.providerDiv_tip #' + providerId + '_seed_time').prop('value');\n        const processMet = $('.providerDiv_tip #' + providerId + '_process_method').prop('value');\n        const optionString = $('.providerDiv_tip #' + providerId + '_option_string');\n\n        optionString.val([seedRatio, seedTime, processMet].join('|'));\n    };\n\n    $(this).on('change', '.seed_option', function () {\n        const providerId = $(this).prop('id').split('_')[0];\n        $(this).makeTorrentOptionString(providerId);\n    });\n\n    $.fn.replaceOptions = function (options) {\n        let $option;\n\n        this.empty();\n        const self = this;\n\n        $.each(options, (index, option) => {\n            $option = $('<option></option>').prop('value', option.value).text(option.text);\n            self.append($option);\n        });\n    };\n\n    // Initialization stuff\n    $.fn.newznabProvidersCapabilities = [];\n\n    $(this).showHideProviders();\n\n    $('#provider_order_list').sortable({\n        placeholder: 'ui-state-highlight',\n        update() {\n            $(this).refreshProviderList();\n        }\n    });\n\n    $('#provider_order_list').disableSelection();\n});\n\n},{}]},{},[1]);\n"],"file":"config-providers.js"}